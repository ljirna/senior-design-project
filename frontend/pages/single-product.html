<main class="page-container">
  <div class="product-detail-page">
    <div class="container">
      <!-- Product Content -->
      <div class="product-content-wrapper" id="productContent">
        <!-- Product Gallery Section -->
        <section class="product-gallery-section" aria-label="Product images">
          <div class="product-main-image">
            <img
              id="mainProductImage"
              src="https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80"
              alt="Modern Leather Sofa - Main View"
              data-product-id="sof-001"
            />
          </div>

          <div class="thumbnail-gallery">
            <!-- Thumbnail 1 (Active) -->
            <div class="thumbnail-item active" data-image-index="0">
              <img
                src="https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=300&q=80"
                alt="Modern Leather Sofa - Front View"
              />
            </div>

            <!-- Thumbnail 2 -->
            <div class="thumbnail-item" data-image-index="1">
              <img
                src="https://images.unsplash.com/photo-1567016432779-094069958ea5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=300&q=80"
                alt="Modern Leather Sofa - Side View"
              />
            </div>

            <!-- Thumbnail 3 -->
            <div class="thumbnail-item" data-image-index="2">
              <img
                src="https://images.unsplash.com/photo-1517705008128-361805f42e86?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=300&q=80"
                alt="Modern Leather Sofa - Detail View"
              />
            </div>

            <!-- Thumbnail 4 -->
            <div class="thumbnail-item" data-image-index="3">
              <img
                src="https://images.unsplash.com/photo-1556228453-efd6c1ff04f6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=300&q=80"
                alt="Modern Leather Sofa - In Living Room"
              />
            </div>

            <!-- Thumbnail 5 -->
            <div class="thumbnail-item" data-image-index="4">
              <img
                src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=300&q=80"
                alt="Modern Leather Sofa - Different Angle"
              />
            </div>
          </div>
        </section>

        <!-- Product Info Section -->
        <section class="product-info-section" aria-label="Product information">
          <!-- Product Header -->
          <div class="product-header">
            <span class="product-category">Sofas & Couches</span>
            <h1 class="product-title" id="productTitle">Modern Leather Sofa</h1>
            <p class="product-subtitle">
              Premium full-grain leather with solid wood frame
            </p>
          </div>

          <!-- Price Section -->
          <div class="product-price-section">
            <div class="price-display">
              <span class="current-price" id="productPrice">$1,299.99</span>
            </div>
          </div>

          <!-- Key Features -->
          <ul class="product-details-list">
            <li>
              <i class="fas fa-check"></i>
              <span>Dimensions: 86" W × 38" D × 30" H</span>
            </li>
            <li>
              <i class="fas fa-check"></i>
              <span>Weight capacity: 750 lbs</span>
            </li>
          </ul>

          <!-- Quantity and Action Buttons -->
          <div class="quantity-actions-section">
            <div class="quantity-selector">
              <button
                type="button"
                class="qty-btn"
                id="decreaseQty"
                aria-label="Decrease quantity"
              >
                <i class="fas fa-minus"></i>
              </button>
              <input
                type="number"
                class="qty-input"
                id="productQuantity"
                value="1"
                min="1"
                max="10"
                aria-label="Quantity"
              />
              <button
                type="button"
                class="qty-btn"
                id="increaseQty"
                aria-label="Increase quantity"
              >
                <i class="fas fa-plus"></i>
              </button>
            </div>

            <div class="action-buttons">
              <button type="button" class="add-to-cart-btn" id="addToCartBtn">
                <i class="fas fa-shopping-cart"></i>
                Add to Cart
              </button>
              <button
                type="button"
                class="wishlist-btn"
                id="wishlistBtn"
                aria-label="Add to wishlist"
              >
                <i class="far fa-heart"></i>
              </button>
            </div>
          </div>
        </section>
      </div>

      <!-- Related Products Section -->
      <section class="related-products" aria-label="Related products">
        <div class="section-header">
          <h2>You Might Also Like</h2>
          <p>Products that complement this item</p>
        </div>

        <div class="products-grid">
          <!-- Related Product 2 -->
          <div class="product-card">
            <button
              class="favorite-btn"
              data-product-id="2"
              aria-label="Add to favorites"
            >
              <i class="far fa-heart"></i>
            </button>

            <img
              src="https://images.unsplash.com/photo-1556228453-efd6c1ff04f6?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
              alt="Coffee Table"
              class="product-image"
            />
            <div class="product-content">
              <h3 class="product-title">Glass Coffee Table</h3>
              <p class="product-category">Tables</p>
              <div class="product-price">$299.99</div>
              <div class="product-actions">
                <a href="#single-product/2" class="btn-see-more">See More</a>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</main>

<script>
  // Single product page scripts are handled by router.js initProductPage()
  // The router will call initProductPage() which will handle:
  // 1. Image gallery functionality
  // 2. Quantity controls
  // 3. Add to cart button
  // 4. Wishlist button

  document.addEventListener("DOMContentLoaded", function () {
    console.log("Single product page loaded");

    // Initialize favorite buttons in related products section
    document.querySelectorAll(".favorite-btn").forEach((btn) => {
      btn.addEventListener("click", function (e) {
        e.preventDefault();
        const icon = this.querySelector("i");
        const productId = this.getAttribute("data-product-id");

        if (icon.classList.contains("far")) {
          // Add to favorites
          FavoriteService.addToFavorites(
            productId,
            (response) => {
              icon.classList.remove("far");
              icon.classList.add("fas");
              if (typeof showToast === "function") {
                showToast("Added to favorites!", "success");
              }
            },
            (error) => {
              if (typeof showToast === "function") {
                showToast("Failed to add to favorites", "error");
              }
              console.error("Error adding to favorites:", error);
            }
          );
        } else {
          // Remove from favorites
          FavoriteService.removeFromFavorites(
            productId,
            (response) => {
              icon.classList.remove("fas");
              icon.classList.add("far");
              if (typeof showToast === "function") {
                showToast("Removed from favorites!", "info");
              }
            },
            (error) => {
              if (typeof showToast === "function") {
                showToast("Failed to remove from favorites", "error");
              }
              console.error("Error removing from favorites:", error);
            }
          );
        }
      });
    });
  });
</script>
